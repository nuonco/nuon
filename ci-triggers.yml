---
# this file is where we define the rules for what changes trigger CI runs. Each service or artifact should have an entry
# in this file, and a list of directories/rules that should trigger changes for it.
#
# our CI system uses the https://github.com/dorny/paths-filter github action for looking up changes.

# to add a new directory that triggers a CI run for a service, update the list entry
services: |
  ctl-api:
    - services/ctl-api/**
  workers-apps:
    - services/workers-apps/**
  workers-canary:
    - services/workers-canary/**
    - services/e2e/nuon/**
  workers-executors:
    - services/workers-executors/**
    - pkg/terraform/**
  workers-installs:
    - services/workers-installs/**
  workers-orgs:
    - services/workers-orgs/**

# to add a new directory that triggers a CI run for an artifact, update the list entry
artifacts: |
  services/e2e:
    - services/e2e/**

  bins/nuonctl:
    - bins/nuonctl/**
  bins/cli:
    - bins/cli/**

  charts/demo:
    - charts/demo/**
  charts/temporal:
    - charts/temporal/**
  charts/waypoint:
    - charts/waypoint/**

  bins/waypoint-plugin-exp:
    - bins/waypoint-plugin-exp/**
  bins/waypoint-plugin-helm:
    - bins/waypoint-plugin-helm/**
  bins/waypoint-plugin-noop:
    - bins/waypoint-plugin-noop/**
  bins/waypoint-plugin-oci:
    - bins/waypoint-plugin-oci/**
  bins/waypoint-plugin-oci-sync:
    - bins/waypoint-plugin-oci-sync/**
  bins/waypoint-plugin-terraform:
    - bins/waypoint-plugin-terraform/**
    - pkg/terraform/**
  bins/waypoint-plugin-job:
    - bins/waypoint-plugin-job/**

  sandboxes/aws-eks:
  - sandboxes/aws-eks/**
  sandboxes/empty:
  - sandboxes/empty/**
