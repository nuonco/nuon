---
# this file is where we define the rules for what changes trigger CI runs. Each service or artifact should have an entry
# in this file, and a list of directories/rules that should trigger changes for it.
#
# our CI system uses the https://github.com/dorny/paths-filter github action for looking up changes.

# to add a new directory that triggers a CI run for a service, update the list entry
services: |
  ctl-api:
    - services/ctl-api/**
    - go.mod
    - go.sum
    - pkg/types/workflows/executors/**
  dashboard-ui:
    - services/dashboard-ui/**
  wiki:
    - services/wiki/**
    - wiki/**
  workers-executors:
    - go.mod
    - go.sum
    - services/workers-executors/**
    - pkg/terraform/**

# infra is managed via terraform cloud
terraform-cloud: |
  terraform:
    infra/**
  ctl-api:
    services/ctl-api/infra/**
  dashboard-ui:
    services/dashboard-ui/infra/**
  workers-canary:
    services/workers-canary/infra/**
  workers-executors:
    services/workers-executors/infra/**

# to add a new directory that triggers a CI run for an artifact, update the list entry
artifacts: |
  services/e2e:
    - services/e2e/**

  bins/nuonctl:
    - bins/nuonctl/**
  bins/cli:
    - bins/cli/**
    - go.mod
    - go.sum
    - pkg/types/workflows/executors/**

  charts/demo:
    - charts/demo/**
  charts/temporal:
    - charts/temporal/**

  bins/runner:
    - bins/runner/**
    - pkg/**
