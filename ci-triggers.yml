---
# this file is where we define the rules for what changes trigger CI runs. Each service or artifact should have an entry
# in this file, and a list of directories/rules that should trigger changes for it.
#
# our CI system uses the https://github.com/dorny/paths-filter github action for looking up changes.

# to add a new directory that triggers a CI run for a service, update the list entry
services: |
  ctl-api:
    - services/ctl-api/**
    - go.mod
    - go.sum
    - pkg/types/workflows/executors/**
  dashboard-ui:
    - services/dashboard-ui/**
  wiki:
    - services/wiki/**
    - wiki/**
  workers-apps:
    - go.mod
    - go.sum
    - services/workers-apps/**
  workers-canary:
    - go.mod
    - go.sum
    - services/workers-canary/**
    - services/e2e/nuon/**
  workers-executors:
    - go.mod
    - go.sum
    - services/workers-executors/**
    - pkg/terraform/**
    - pkg/waypoint/**
  workers-installs:
    - go.mod
    - go.sum
    - services/workers-installs/**
    - pkg/types/workflows/installs/**
    - pkg/types/workflows/executors/**
  workers-orgs:
    - go.mod
    - go.sum
    - services/workers-orgs/**
  installers-ui:
    - services/installers-ui/**

# to add a new directory that triggers a CI run for an artifact, update the list entry
artifacts: |
  services/e2e:
    - services/e2e/**

  bins/nuonctl:
    - bins/nuonctl/**
  bins/cli:
    - bins/cli/**
    - go.mod
    - go.sum
    - pkg/types/workflows/executors/**

  charts/demo:
    - charts/demo/**
  charts/temporal:
    - charts/temporal/**
  charts/waypoint:
    - charts/waypoint/**

  bins/waypoint-plugin-exp:
    - bins/waypoint-plugin-exp/**
    - pkg/plugins/configs/**
    - pkg/types/plugins/**
  bins/waypoint-plugin-helm:
    - bins/waypoint-plugin-helm/**
    - pkg/plugins/configs/**
    - pkg/types/plugins/**
  bins/waypoint-plugin-noop:
    - bins/waypoint-plugin-noop/**
    - pkg/plugins/configs/**
    - pkg/types/plugins/**
  bins/waypoint-plugin-oci:
    - bins/waypoint-plugin-oci/**
    - pkg/plugins/configs/**
    - pkg/types/plugins/**
  bins/waypoint-plugin-oci-sync:
    - bins/waypoint-plugin-oci-sync/**
    - pkg/plugins/configs/**
    - pkg/types/plugins/**
  bins/waypoint-plugin-terraform:
    - bins/waypoint-plugin-terraform/**
    - pkg/terraform/**
    - pkg/plugins/configs/**
    - pkg/types/plugins/**
  bins/waypoint-plugin-job:
    - bins/waypoint-plugin-job/**
    - pkg/plugins/configs/**
    - pkg/types/plugins/**

  sandboxes/aws-eks:
  - sandboxes/aws-eks/**
  sandboxes/empty:
  - sandboxes/empty/**
