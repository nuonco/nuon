---
type: artifact

base_images:
  - src: Dockerfile.build
    name: BUILD_IMAGE
    tag: buildimage

# sources define which pieces of the mono repo are included in your builds/envs.
sources:
  - src: images/
  - src: pkg
  - src: go.mod
  - src: go.sum
  - src: tools.go
  - src: images/go-base/Dockerfile.build
    dst: Dockerfile.build
  - src: .golangci.yml

color: green

tests:
  # a test is a dockerfile target. 
  # we can make sure to cache mounts by leveraging dockerfile targets.
  - name: lint
    docker_target: lint

  - name: unit test
    docker_target: test
