{
  "resource": {
    "aws_vpc": {
      "main": {
        "cidr_block": "10.0.0.0/16",
        "enable_dns_support": true,
        "enable_dns_hostnames": true,
        "tags": {
          "Name": "Main VPC",
          "Environment": "Production"
        }
      }
    },
    "aws_subnet": {
      "public_1": {
        "vpc_id": "${aws_vpc.main.id}",
        "cidr_block": "10.0.1.0/24",
        "availability_zone": "us-east-1a",
        "map_public_ip_on_launch": true,
        "tags": {
          "Name": "Public Subnet 1"
        }
      },
      "private_1": {
        "vpc_id": "${aws_vpc.main.id}",
        "cidr_block": "10.0.2.0/24",
        "availability_zone": "us-east-1b",
        "tags": {
          "Name": "Private Subnet 1"
        }
      }
    },
    "aws_internet_gateway": {
      "main": {
        "vpc_id": "${aws_vpc.main.id}",
        "tags": {
          "Name": "Main IGW"
        }
      }
    },
    "aws_s3_bucket": {
      "data_bucket": {
        "bucket": "my-example-data-bucket-2023",
        "acl": "private",
        "versioning": {
          "enabled": true
        },
        "tags": {
          "Name": "Data Storage Bucket",
          "Environment": "Production"
        }
      },
      "logs_bucket": {
        "bucket": "my-example-logs-bucket-2023",
        "acl": "private",
        "lifecycle_rule": [
          {
            "id": "log-rotation",
            "enabled": true,
            "prefix": "logs/",
            "expiration": {
              "days": 90
            }
          }
        ],
        "tags": {
          "Name": "Logs Bucket",
          "Environment": "Production"
        }
      }
    },
    "aws_s3_bucket_public_access_block": {
      "data_bucket_block": {
        "bucket": "${aws_s3_bucket.data_bucket.id}",
        "block_public_acls": true,
        "block_public_policy": true,
        "ignore_public_acls": true,
        "restrict_public_buckets": true
      },
      "logs_bucket_block": {
        "bucket": "${aws_s3_bucket.logs_bucket.id}",
        "block_public_acls": true,
        "block_public_policy": true,
        "ignore_public_acls": true,
        "restrict_public_buckets": true
      }
    }
  }
}

