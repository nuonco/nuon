basePath: /api/v1
definitions:
  app.AWSAccount:
    properties:
      created_at:
        type: string
      created_by_id:
        type: string
      iam_role_arn:
        type: string
      id:
        type: string
      region:
        type: string
      updated_at:
        type: string
    type: object
  app.AWSECRImageConfig:
    properties:
      aws_region:
        type: string
      component_config_id:
        description: connection to parent model
        type: string
      component_config_type:
        type: string
      created_at:
        type: string
      created_by_id:
        type: string
      iam_role_arn:
        description: actual configuration
        type: string
      id:
        type: string
      updated_at:
        type: string
    type: object
  app.App:
    properties:
      created_at:
        type: string
      created_by_id:
        type: string
      id:
        type: string
      name:
        type: string
      org:
        $ref: '#/definitions/app.Org'
      org_id:
        type: string
      sandbox_release:
        $ref: '#/definitions/app.SandboxRelease'
      status:
        type: string
      status_description:
        type: string
      updated_at:
        type: string
    type: object
  app.BasicDeployConfig:
    properties:
      args:
        items:
          type: string
        type: array
      component_config_id:
        description: connection to parent model
        type: string
      component_config_type:
        type: string
      cpu_limit:
        type: string
      cpu_request:
        type: string
      created_at:
        type: string
      created_by_id:
        type: string
      env_vars:
        additionalProperties:
          type: string
        type: object
      health_check_path:
        type: string
      id:
        type: string
      instance_count:
        description: actual configuration
        type: integer
      listen_port:
        type: integer
      mem_limit:
        type: string
      mem_request:
        type: string
      updated_at:
        type: string
    type: object
  app.Component:
    properties:
      app_id:
        type: string
      config_versions:
        type: integer
      created_at:
        type: string
      created_by_id:
        type: string
      id:
        type: string
      name:
        type: string
      updated_at:
        type: string
    type: object
  app.ComponentBuild:
    properties:
      component_config_connection_id:
        type: string
      created_at:
        type: string
      created_by_id:
        type: string
      git_ref:
        type: string
      id:
        type: string
      releases:
        items:
          $ref: '#/definitions/app.ComponentRelease'
        type: array
      status:
        type: string
      status_description:
        type: string
      updated_at:
        type: string
      vcs_connection_commit:
        $ref: '#/definitions/app.VCSConnectionCommit'
    type: object
  app.ComponentConfigConnection:
    properties:
      component_id:
        type: string
      created_at:
        type: string
      created_by_id:
        type: string
      docker_build:
        $ref: '#/definitions/app.DockerBuildComponentConfig'
      external_image:
        $ref: '#/definitions/app.ExternalImageComponentConfig'
      helm:
        $ref: '#/definitions/app.HelmComponentConfig'
      id:
        type: string
      terraform_module:
        $ref: '#/definitions/app.TerraformModuleComponentConfig'
      updated_at:
        type: string
    type: object
  app.ComponentRelease:
    properties:
      build_id:
        type: string
      created_at:
        type: string
      created_by_id:
        type: string
      id:
        type: string
      release_steps:
        items:
          $ref: '#/definitions/app.ComponentReleaseStep'
        type: array
      status:
        type: string
      status_description:
        type: string
      total_release_steps:
        type: integer
      updated_at:
        type: string
    type: object
  app.ComponentReleaseStep:
    properties:
      component_release_id:
        description: parent release ID
        type: string
      componentRelease:
        $ref: '#/definitions/app.ComponentRelease'
      created_at:
        type: string
      created_by_id:
        type: string
      delay:
        description: fields to control the delay of the individual step, as this is
          set based on the parent strategy
        type: string
      id:
        type: string
      install_deploys:
        items:
          $ref: '#/definitions/app.InstallDeploy'
        type: array
      requested_install_ids:
        description: |-
          When a step is created, a set of installs are targeted. However, by the time the release step goes out, the
          install might have been setup in any order of ways.
        items:
          type: string
        type: array
      status:
        type: string
      status_description:
        type: string
      updated_at:
        type: string
    type: object
  app.ConnectedGithubVCSConfig:
    properties:
      branch:
        type: string
      component_config_id:
        description: parent component
        type: string
      component_config_type:
        type: string
      created_at:
        type: string
      created_by_id:
        type: string
      directory:
        type: string
      id:
        type: string
      repo:
        type: string
      repo_name:
        type: string
      repo_owner:
        type: string
      updated_at:
        type: string
      vcs_connection_id:
        type: string
    type: object
  app.DockerBuildComponentConfig:
    properties:
      basic_deploy_config:
        $ref: '#/definitions/app.BasicDeployConfig'
      build_args:
        items:
          type: string
        type: array
      component_config_connection_id:
        description: value
        type: string
      connected_github_vcs_config:
        $ref: '#/definitions/app.ConnectedGithubVCSConfig'
      created_at:
        type: string
      created_by_id:
        type: string
      dockerfile:
        type: string
      env_vars:
        additionalProperties:
          type: string
        type: object
      id:
        type: string
      public_git_vcs_config:
        allOf:
        - $ref: '#/definitions/app.PublicGitVCSConfig'
        description: VCS Config
      sync_only:
        type: boolean
      target:
        type: string
      updated_at:
        type: string
    type: object
  app.ExternalImageComponentConfig:
    properties:
      aws_ecr_image_config:
        $ref: '#/definitions/app.AWSECRImageConfig'
      basic_deploy_config:
        $ref: '#/definitions/app.BasicDeployConfig'
      component_config_connection_id:
        description: value
        type: string
      connected_github_vcs_config:
        $ref: '#/definitions/app.ConnectedGithubVCSConfig'
      created_at:
        type: string
      created_by_id:
        type: string
      id:
        type: string
      image_url:
        type: string
      public_git_vcs_config:
        allOf:
        - $ref: '#/definitions/app.PublicGitVCSConfig'
        description: VCS Config
      sync_only:
        type: boolean
      tag:
        type: string
      updated_at:
        type: string
    type: object
  app.HelmComponentConfig:
    properties:
      chart_name:
        description: Helm specific configurations
        type: string
      component_config_connection_id:
        description: parent reference
        type: string
      connected_github_vcs_config:
        $ref: '#/definitions/app.ConnectedGithubVCSConfig'
      created_at:
        type: string
      created_by_id:
        type: string
      id:
        type: string
      public_git_vcs_config:
        $ref: '#/definitions/app.PublicGitVCSConfig'
      updated_at:
        type: string
      values:
        additionalProperties:
          type: string
        type: object
    type: object
  app.Install:
    properties:
      app_id:
        type: string
      aws_account:
        $ref: '#/definitions/app.AWSAccount'
      created_at:
        type: string
      created_by_id:
        type: string
      id:
        type: string
      install_components:
        items:
          $ref: '#/definitions/app.InstallComponent'
        type: array
      name:
        type: string
      sandbox_release:
        $ref: '#/definitions/app.SandboxRelease'
      status:
        type: string
      status_description:
        type: string
      updated_at:
        type: string
    type: object
  app.InstallComponent:
    properties:
      component:
        $ref: '#/definitions/app.Component'
      component_id:
        type: string
      created_at:
        type: string
      created_by_id:
        type: string
      id:
        type: string
      install:
        $ref: '#/definitions/app.Install'
      install_id:
        type: string
      installDeploys:
        items:
          $ref: '#/definitions/app.InstallDeploy'
        type: array
      updated_at:
        type: string
    type: object
  app.InstallDeploy:
    properties:
      build:
        $ref: '#/definitions/app.ComponentBuild'
      build_id:
        type: string
      created_at:
        type: string
      created_by_id:
        type: string
      id:
        type: string
      install_component_id:
        type: string
      release_id:
        type: string
      status:
        type: string
      status_description:
        type: string
      updated_at:
        type: string
    type: object
  app.Org:
    properties:
      created_at:
        type: string
      created_by_id:
        type: string
      id:
        type: string
      name:
        type: string
      status:
        type: string
      status_description:
        type: string
      updated_at:
        type: string
      users:
        items:
          $ref: '#/definitions/app.UserOrg'
        type: array
      vcs_connections:
        items:
          $ref: '#/definitions/app.VCSConnection'
        type: array
    type: object
  app.PublicGitVCSConfig:
    properties:
      branch:
        type: string
      component_config_id:
        type: string
      component_config_type:
        type: string
      created_at:
        type: string
      created_by_id:
        type: string
      directory:
        type: string
      id:
        type: string
      repo:
        description: actual configuration
        type: string
      updated_at:
        type: string
    type: object
  app.Sandbox:
    properties:
      created_at:
        type: string
      created_by_id:
        type: string
      description:
        type: string
      id:
        type: string
      name:
        type: string
      releases:
        items:
          $ref: '#/definitions/app.SandboxRelease'
        type: array
      updated_at:
        type: string
    type: object
  app.SandboxRelease:
    properties:
      created_at:
        type: string
      created_by_id:
        type: string
      deprovision_policy_url:
        type: string
      id:
        type: string
      one_click_role_template_url:
        type: string
      provision_policy_url:
        type: string
      sandbox:
        $ref: '#/definitions/app.Sandbox'
      terraform_version:
        type: string
      trust_policy_url:
        type: string
      updated_at:
        type: string
      version:
        type: string
    type: object
  app.TerraformModuleComponentConfig:
    properties:
      component_config_connection_id:
        description: parent reference
        type: string
      connected_github_vcs_config:
        $ref: '#/definitions/app.ConnectedGithubVCSConfig'
      created_at:
        type: string
      created_by_id:
        type: string
      id:
        type: string
      public_git_vcs_config:
        allOf:
        - $ref: '#/definitions/app.PublicGitVCSConfig'
        description: VCSConfig
      updated_at:
        type: string
      variables:
        additionalProperties:
          type: string
        type: object
      version:
        description: terraform configuration values
        type: string
    type: object
  app.UserOrg:
    properties:
      created_at:
        type: string
      created_by_id:
        type: string
      id:
        type: string
      org:
        $ref: '#/definitions/app.Org'
      orgID:
        description: parent relationship
        type: string
      updated_at:
        type: string
      userID:
        type: string
    type: object
  app.UserToken:
    properties:
      created_at:
        type: string
      created_by_id:
        type: string
      email:
        type: string
      expires_at:
        type: string
      id:
        type: string
      issued_at:
        type: string
      issuer:
        type: string
      subject:
        description: claim data
        type: string
      updated_at:
        type: string
    type: object
  app.VCSConnection:
    properties:
      created_at:
        type: string
      created_by_id:
        type: string
      github_install_id:
        type: string
      id:
        type: string
      updated_at:
        type: string
      vcs_connection_commit:
        items:
          $ref: '#/definitions/app.VCSConnectionCommit'
        type: array
    type: object
  app.VCSConnectionCommit:
    properties:
      author_email:
        type: string
      author_name:
        type: string
      component_config_connection_id:
        type: string
      created_at:
        type: string
      created_by_id:
        type: string
      id:
        type: string
      message:
        type: string
      sha:
        type: string
      updated_at:
        type: string
    type: object
  service.BuildLog:
    type: object
  service.ConnectedGithubVCSConfigRequest:
    properties:
      branch:
        type: string
      directory:
        type: string
      gitRef:
        type: string
      repo:
        type: string
    required:
    - directory
    - repo
    type: object
  service.CreateAppRequest:
    properties:
      name:
        type: string
    required:
    - name
    type: object
  service.CreateComponentBuildRequest:
    properties:
      git_ref:
        type: string
      use_latest:
        type: boolean
    type: object
  service.CreateComponentReleaseRequest:
    properties:
      build_id:
        type: string
      strategy:
        properties:
          delay:
            type: string
          installs_per_step:
            type: integer
        type: object
    type: object
  service.CreateComponentRequest:
    properties:
      name:
        type: string
    required:
    - name
    type: object
  service.CreateConnectionRequest:
    properties:
      github_install_id:
        type: string
    required:
    - github_install_id
    type: object
  service.CreateDockerBuildComponentConfigRequest:
    properties:
      basic_deploy_config:
        $ref: '#/definitions/service.basicDeployConfigRequest'
      build_args:
        items:
          type: string
        type: array
      connected_github_vcs_config:
        $ref: '#/definitions/service.ConnectedGithubVCSConfigRequest'
      dockerfile:
        type: string
      env_vars:
        additionalProperties:
          type: string
        type: object
      public_git_vcs_config:
        $ref: '#/definitions/service.PublicGitVCSConfigRequest'
      sync_only:
        type: boolean
      target:
        type: string
    type: object
  service.CreateExternalImageComponentConfigRequest:
    properties:
      aws_ecr_image_config:
        $ref: '#/definitions/service.awsECRImageConfigRequest'
      basic_deploy_config:
        $ref: '#/definitions/service.basicDeployConfigRequest'
      connected_github_vcs_config:
        $ref: '#/definitions/service.ConnectedGithubVCSConfigRequest'
      image_url:
        type: string
      public_git_vcs_config:
        $ref: '#/definitions/service.PublicGitVCSConfigRequest'
      sync_only:
        type: boolean
      tag:
        type: string
    required:
    - image_url
    - tag
    type: object
  service.CreateHelmComponentConfigRequest:
    properties:
      chart_name:
        type: string
      connected_github_vcs_config:
        $ref: '#/definitions/service.ConnectedGithubVCSConfigRequest'
      public_git_vcs_config:
        $ref: '#/definitions/service.PublicGitVCSConfigRequest'
      values:
        additionalProperties:
          type: string
        type: object
    required:
    - chart_name
    - values
    type: object
  service.CreateInstallDeployRequest:
    properties:
      build_id:
        type: string
    type: object
  service.CreateInstallRequest:
    properties:
      aws_account:
        properties:
          iam_role_arn:
            type: string
          region:
            enum:
            - us-east-1
            - us-east-2
            - us-west-2
            type: string
        required:
        - iam_role_arn
        type: object
      name:
        type: string
    required:
    - aws_account
    - name
    type: object
  service.CreateOrgRequest:
    properties:
      name:
        type: string
    required:
    - name
    type: object
  service.CreateOrgUserRequest:
    properties:
      user_id:
        type: string
    type: object
  service.CreateSandboxReleaseRequest:
    properties:
      terraform_version:
        type: string
      version:
        type: string
    required:
    - terraform_version
    - version
    type: object
  service.CreateSandboxRequest:
    properties:
      description:
        type: string
      name:
        type: string
    type: object
  service.CreateTerraformModuleComponentConfigRequest:
    properties:
      connected_github_vcs_config:
        $ref: '#/definitions/service.ConnectedGithubVCSConfigRequest'
      public_git_vcs_config:
        $ref: '#/definitions/service.PublicGitVCSConfigRequest'
      variables:
        additionalProperties:
          type: string
        type: object
      version:
        type: string
    required:
    - variables
    type: object
  service.DeployLog:
    type: object
  service.PublicGitVCSConfigRequest:
    properties:
      branch:
        type: string
      directory:
        type: string
      repo:
        type: string
    required:
    - branch
    - directory
    - repo
    type: object
  service.PublishMetricInput:
    type: object
  service.Repository:
    properties:
      clone_url:
        type: string
      default_branch:
        type: string
      full_name:
        type: string
      git_url:
        type: string
      name:
        type: string
      user_name:
        type: string
    required:
    - clone_url
    - default_branch
    - full_name
    - git_url
    - name
    - user_name
    type: object
  service.RestartInstallRequest:
    type: object
  service.UpdateAppRequest:
    properties:
      name:
        type: string
    type: object
  service.UpdateAppSandboxRequest:
    properties:
      sandbox_release_id:
        type: string
    required:
    - sandbox_release_id
    type: object
  service.UpdateComponentRequest:
    properties:
      name:
        type: string
    required:
    - name
    type: object
  service.UpdateInstallRequest:
    properties:
      name:
        type: string
    type: object
  service.UpdateOrgRequest:
    properties:
      name:
        type: string
    required:
    - name
    type: object
  service.awsECRImageConfigRequest:
    properties:
      aws_region:
        type: string
      iam_role_arn:
        type: string
    type: object
  service.basicDeployConfigRequest:
    properties:
      args:
        items:
          type: string
        type: array
      cpu_limit:
        type: string
      cpu_request:
        type: string
      env_vars:
        additionalProperties:
          type: string
        type: object
      health_check_path:
        type: string
      instance_count:
        type: integer
      listen_port:
        type: integer
      mem_limit:
        type: string
      mem_request:
        type: string
    type: object
info:
  contact:
    email: support@nuon.co
    name: Nuon Support
  description: API for managing nuon apps and installs.
  title: Nuon API
  version: v1
paths:
  /v1/apps:
    get:
      consumes:
      - application/json
      description: get an app
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/app.App'
            type: array
      summary: get all apps for the current org
      tags:
      - apps
  /v1/apps/:
    post:
      consumes:
      - application/json
      description: get an app
      parameters:
      - description: Input
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/service.CreateAppRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/app.App'
      summary: create an app
      tags:
      - apps
  /v1/apps/{app_id}:
    delete:
      consumes:
      - application/json
      description: delete an app
      parameters:
      - description: app ID
        in: path
        name: app_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: boolean
      summary: delete an app
      tags:
      - apps
    get:
      consumes:
      - application/json
      description: get an app
      parameters:
      - description: app ID
        in: path
        name: app_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/app.App'
      summary: get an app
      tags:
      - apps
    patch:
      consumes:
      - application/json
      description: update an app
      parameters:
      - description: app ID
        in: path
        name: app_id
        required: true
        type: string
      - description: Input
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/service.UpdateAppRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/app.App'
      summary: update an app
      tags:
      - apps
  /v1/apps/{app_id}/components:
    get:
      consumes:
      - application/json
      description: get all components for an org
      parameters:
      - description: app ID
        in: path
        name: app_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/app.Component'
            type: array
      summary: get all components for an app
      tags:
      - components
  /v1/apps/{app_id}/components/:
    post:
      consumes:
      - application/json
      description: create an app component
      parameters:
      - description: app ID
        in: path
        name: app_id
        required: true
        type: string
      - description: Input
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/service.CreateComponentRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/app.Component'
      summary: create an app component
      tags:
      - components
  /v1/apps/{app_id}/installs:
    get:
      consumes:
      - application/json
      description: get all installs for an org
      parameters:
      - description: app ID
        in: path
        name: app_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/app.Install'
            type: array
      summary: get all installs for an app
      tags:
      - installs
  /v1/apps/{app_id}/installs/:
    post:
      consumes:
      - application/json
      description: create an app install
      parameters:
      - description: app ID
        in: path
        name: app_id
        required: true
        type: string
      - description: Input
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/service.CreateInstallRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/app.Install'
      summary: create an app install
      tags:
      - installs
  /v1/apps/{app_id}/releases:
    get:
      consumes:
      - application/json
      description: get all release for an app
      parameters:
      - description: app ID
        in: path
        name: app_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/app.ComponentRelease'
            type: array
      summary: get all releases for an app
      tags:
      - releases
  /v1/apps/{app_id}/sandbox:
    put:
      consumes:
      - application/json
      description: update an app sandbox release
      parameters:
      - description: app ID
        in: path
        name: app_id
        required: true
        type: string
      - description: Input
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/service.UpdateAppSandboxRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/app.App'
      summary: update an app sandbox release
      tags:
      - apps
  /v1/components:
    get:
      consumes:
      - application/json
      description: get all components for an org
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/app.Component'
            type: array
      summary: get all components for an org
      tags:
      - components
  /v1/components/{component_id}:
    delete:
      consumes:
      - application/json
      description: delete an component
      parameters:
      - description: component ID
        in: path
        name: component_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: boolean
      summary: delete an component
      tags:
      - components
    get:
      consumes:
      - application/json
      description: get a component
      parameters:
      - description: component ID
        in: path
        name: component_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/app.Component'
      summary: get a component
      tags:
      - components
    patch:
      consumes:
      - application/json
      description: update a component
      parameters:
      - description: component ID
        in: path
        name: component_id
        required: true
        type: string
      - description: Input
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/service.UpdateComponentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/app.Component'
      summary: update a component
      tags:
      - components
  /v1/components/{component_id}/builds:
    get:
      consumes:
      - application/json
      description: get all builds for a component
      parameters:
      - description: component ID
        in: path
        name: component_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/app.ComponentBuild'
            type: array
      summary: get all builds for a component
      tags:
      - components
    post:
      consumes:
      - application/json
      description: create component build
      parameters:
      - description: component ID
        in: path
        name: component_id
        required: true
        type: string
      - description: Input
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/service.CreateComponentBuildRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/app.ComponentBuild'
      summary: create component build
      tags:
      - components
  /v1/components/{component_id}/builds/{build_id}:
    get:
      consumes:
      - application/json
      description: get a build for a component
      parameters:
      - description: component ID
        in: path
        name: component_id
        required: true
        type: string
      - description: build ID
        in: path
        name: build_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/app.ComponentBuild'
      summary: get a build for a component
      tags:
      - components
  /v1/components/{component_id}/builds/{build_id}/logs:
    get:
      consumes:
      - application/json
      description: get install build logs
      parameters:
      - description: component ID
        in: path
        name: component_id
        required: true
        type: string
      - description: build ID
        in: path
        name: build_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/service.BuildLog'
            type: array
      summary: get install build logs
      tags:
      - components
  /v1/components/{component_id}/builds/latest:
    get:
      consumes:
      - application/json
      description: get latest build for a component
      parameters:
      - description: component ID
        in: path
        name: component_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/app.ComponentBuild'
      summary: get latest build for a component
      tags:
      - components
  /v1/components/{component_id}/configs:
    get:
      consumes:
      - application/json
      description: get all configs for a component
      parameters:
      - description: component ID
        in: path
        name: component_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/app.ComponentConfigConnection'
            type: array
      summary: get all configs for a component
      tags:
      - components
  /v1/components/{component_id}/configs/docker-build:
    post:
      consumes:
      - application/json
      description: create a docker build component config.
      parameters:
      - description: Input
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/service.CreateDockerBuildComponentConfigRequest'
      - description: component ID
        in: path
        name: component_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/app.DockerBuildComponentConfig'
      summary: create a docker build component config
      tags:
      - components
  /v1/components/{component_id}/configs/external-image:
    post:
      consumes:
      - application/json
      description: create an external image component config.
      parameters:
      - description: Input
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/service.CreateExternalImageComponentConfigRequest'
      - description: component ID
        in: path
        name: component_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/app.ExternalImageComponentConfig'
      summary: create an external image component config
      tags:
      - components
  /v1/components/{component_id}/configs/helm:
    post:
      consumes:
      - application/json
      description: create a helm component config.
      parameters:
      - description: Input
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/service.CreateHelmComponentConfigRequest'
      - description: component ID
        in: path
        name: component_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/app.HelmComponentConfig'
      summary: create a helm component config
      tags:
      - components
  /v1/components/{component_id}/configs/latest:
    get:
      consumes:
      - application/json
      description: get latest config for a component
      parameters:
      - description: component ID
        in: path
        name: component_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/app.ComponentConfigConnection'
      summary: get latest config for a component
      tags:
      - components
  /v1/components/{component_id}/configs/terraform-module:
    post:
      consumes:
      - application/json
      description: create a terraform component config.
      parameters:
      - description: Input
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/service.CreateTerraformModuleComponentConfigRequest'
      - description: component ID
        in: path
        name: component_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/app.TerraformModuleComponentConfig'
      summary: create a terraform component config
      tags:
      - components
  /v1/components/{component_id}/releases:
    get:
      consumes:
      - application/json
      description: get all releases for a component
      parameters:
      - description: component ID
        in: path
        name: component_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/app.ComponentRelease'
            type: array
      summary: get all releases for a component
      tags:
      - releases
    post:
      consumes:
      - application/json
      description: create a release for a component
      parameters:
      - description: component ID
        in: path
        name: component_id
        required: true
        type: string
      - description: Input
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/service.CreateComponentReleaseRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/app.ComponentRelease'
      summary: create a release
      tags:
      - releases
  /v1/general/current-user:
    get:
      consumes:
      - application/json
      description: get current user
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/app.UserToken'
      summary: Get current user
      tags:
      - general
  /v1/general/metrics:
    post:
      consumes:
      - application/json
      description: Both the terraform provider and CLI write metrics back home
      parameters:
      - description: Input
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/service.PublishMetricInput'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: string
      summary: Publish a metric from different Nuon clients for telemetry purposes.
      tags:
      - general
  /v1/installs:
    get:
      consumes:
      - application/json
      description: get all installs for an org
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/app.Install'
            type: array
      summary: get all installs for an org
      tags:
      - installs
  /v1/installs/{install_id}:
    delete:
      consumes:
      - application/json
      description: delete an install
      parameters:
      - description: install ID
        in: path
        name: install_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: boolean
      summary: delete an install
      tags:
      - installs
    get:
      consumes:
      - application/json
      description: get an install
      parameters:
      - description: install ID
        in: path
        name: install_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/app.Install'
      summary: get an install
      tags:
      - installs
    patch:
      consumes:
      - application/json
      description: update an install
      parameters:
      - description: app ID
        in: path
        name: install_id
        required: true
        type: string
      - description: Input
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/service.UpdateInstallRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/app.Install'
      summary: update an install
      tags:
      - installs
  /v1/installs/{install_id}/component/{component_id}:
    get:
      consumes:
      - application/json
      description: get an install
      parameters:
      - description: install ID
        in: path
        name: install_id
        required: true
        type: string
      - description: component ID
        in: path
        name: component_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/app.InstallComponent'
      summary: get an install component
      tags:
      - installs
  /v1/installs/{install_id}/components:
    get:
      consumes:
      - application/json
      description: get all components for an install
      parameters:
      - description: install ID
        in: path
        name: install_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/app.InstallComponent'
            type: array
      summary: get an installs components
      tags:
      - installs
  /v1/installs/{install_id}/components/{component_id}/deploys:
    get:
      consumes:
      - application/json
      description: get all deploys for an install
      parameters:
      - description: install ID
        in: path
        name: install_id
        required: true
        type: string
      - description: component ID
        in: path
        name: component_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/app.InstallDeploy'
            type: array
      summary: get an install components deploys
      tags:
      - installs
  /v1/installs/{install_id}/components/{component_id}/deploys/latest:
    get:
      consumes:
      - application/json
      description: get latest deploy for an install component
      parameters:
      - description: install ID
        in: path
        name: install_id
        required: true
        type: string
      - description: component ID
        in: path
        name: component_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/app.InstallDeploy'
      summary: get the latest deploy for an install component
      tags:
      - installs
  /v1/installs/{install_id}/deploys:
    get:
      consumes:
      - application/json
      description: get all deploys for an install
      parameters:
      - description: install ID
        in: path
        name: install_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/app.InstallDeploy'
            type: array
      summary: get an installs deploys
      tags:
      - installs
  /v1/installs/{install_id}/deploys/:
    post:
      consumes:
      - application/json
      description: deploy a build to an install
      parameters:
      - description: install ID
        in: path
        name: install_id
        required: true
        type: string
      - description: Input
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/service.CreateInstallDeployRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/app.InstallDeploy'
      summary: deploy a build to an install
      tags:
      - installs
  /v1/installs/{install_id}/deploys/{deploy_id}:
    get:
      consumes:
      - application/json
      description: get an install deploy
      parameters:
      - description: install ID
        in: path
        name: install_id
        required: true
        type: string
      - description: deploy ID
        in: path
        name: deploy_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/app.InstallDeploy'
      summary: get an install deploy
      tags:
      - installs
  /v1/installs/{install_id}/deploys/{deploy_id}/logs:
    get:
      consumes:
      - application/json
      description: get install deploy logs
      parameters:
      - description: install ID
        in: path
        name: install_id
        required: true
        type: string
      - description: deploy ID
        in: path
        name: deploy_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/service.DeployLog'
            type: array
      summary: get install deploy logs
      tags:
      - installs
  /v1/installs/{install_id}/deploys/latest:
    get:
      consumes:
      - application/json
      description: get an install deploy
      parameters:
      - description: install ID
        in: path
        name: install_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/app.InstallDeploy'
      summary: get an install deploy
      tags:
      - installs
  /v1/installs/{install_id}/restart:
    post:
      consumes:
      - application/json
      description: restart install event loop
      parameters:
      - description: install ID
        in: path
        name: install_id
        required: true
        type: string
      - description: Input
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/service.RestartInstallRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: boolean
      summary: restart an installs event loop
      tags:
      - installs/internal
  /v1/orgs:
    get:
      consumes:
      - application/json
      description: return current user's orgs
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/app.Org'
            type: array
      summary: Return current user's orgs
      tags:
      - orgs
    post:
      consumes:
      - application/json
      description: create a new org
      parameters:
      - description: Input
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/service.CreateOrgRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/app.Org'
      summary: create a new org
      tags:
      - orgs
  /v1/orgs/{org_id}/add-user:
    post:
      consumes:
      - application/json
      description: create a new org
      parameters:
      - description: org ID to add user too
        in: path
        name: org_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            type: string
      summary: Add a user to an org
      tags:
      - orgs/internal
  /v1/orgs/{org_id}/support-users:
    post:
      consumes:
      - application/json
      description: create a new org
      parameters:
      - description: org ID for your current org
        in: path
        name: org_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            type: string
      summary: Add nuon users as support members
      tags:
      - orgs/internal
  /v1/orgs/current:
    delete:
      consumes:
      - application/json
      description: create a new org
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            type: boolean
      summary: Delete an org
      tags:
      - orgs
    get:
      consumes:
      - application/json
      description: get an org
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/app.Org'
      summary: Get an org
      tags:
      - orgs
    patch:
      consumes:
      - application/json
      description: Update current org
      parameters:
      - description: Input
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/service.UpdateOrgRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/app.Org'
      summary: Update current org
      tags:
      - orgs
  /v1/orgs/current/user:
    post:
      consumes:
      - application/json
      description: add a user to the current org
      parameters:
      - description: Input
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/service.CreateOrgUserRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/app.UserOrg'
      summary: Add a user to the current org
      tags:
      - orgs
  /v1/releases:
    get:
      consumes:
      - application/json
      description: get all installs
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/app.ComponentRelease'
            type: array
      summary: get all releases for all orgs
      tags:
      - releases/internal
  /v1/releases/{release_id}:
    get:
      consumes:
      - application/json
      description: get a release
      parameters:
      - description: release ID
        in: path
        name: release_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/app.ComponentRelease'
      summary: get a release
      tags:
      - releases
  /v1/releases/{release_id}/steps:
    get:
      consumes:
      - application/json
      description: get a release
      parameters:
      - description: release ID
        in: path
        name: release_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/app.ComponentReleaseStep'
            type: array
      summary: get a release
      tags:
      - releases
  /v1/sandboxes:
    get:
      consumes:
      - application/json
      description: get all sandboxes
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/app.Sandbox'
            type: array
      summary: get all sandboxes
      tags:
      - sandboxes
    post:
      consumes:
      - application/json
      description: create a new sandbox
      parameters:
      - description: Input
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/service.CreateSandboxRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/app.Sandbox'
      summary: create a new sandbox
      tags:
      - sandboxes/internal
  /v1/sandboxes/{sandbox_id}:
    get:
      consumes:
      - application/json
      description: get a sandbox
      parameters:
      - description: sandbox ID
        in: path
        name: sandbox_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/app.Sandbox'
      summary: get a sandbox
      tags:
      - sandboxes
  /v1/sandboxes/{sandbox_id}/release:
    post:
      consumes:
      - application/json
      description: create a new sandbox
      parameters:
      - description: Input
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/service.CreateSandboxReleaseRequest'
      - description: sandbox ID
        in: path
        name: sandbox_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/app.Sandbox'
      summary: create a new sandbox
      tags:
      - sandboxes/internal
  /v1/sandboxes/{sandbox_id}/releases:
    get:
      consumes:
      - application/json
      description: get sandbox releases
      parameters:
      - description: sandbox ID
        in: path
        name: sandbox_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/app.SandboxRelease'
            type: array
      summary: get sandbox releases
      tags:
      - sandboxes
  /v1/vcs/connected-repos:
    get:
      consumes:
      - application/json
      description: return all vcs connected repos for an org
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/service.Repository'
            type: array
      summary: get all vcs connected repos for an org
      tags:
      - vcs
  /v1/vcs/connections:
    get:
      consumes:
      - application/json
      description: get vcs connections
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            items:
              $ref: '#/definitions/app.VCSConnection'
            type: array
      summary: get vcs connection for an org
      tags:
      - vcs
    post:
      consumes:
      - application/json
      description: create a vcs connection
      parameters:
      - description: Input
        in: body
        name: req
        required: true
        schema:
          $ref: '#/definitions/service.CreateConnectionRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            $ref: '#/definitions/app.VCSConnection'
      summary: create a vcs connection for Github
      tags:
      - vcs
  /v1/vcs/connections/{connection_id}:
    get:
      consumes:
      - application/json
      description: get vcs connection
      parameters:
      - description: connection ID
        in: path
        name: connection_id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/app.VCSConnection'
      summary: returns a vcs connection for an org
      tags:
      - vcs
securityDefinitions:
  ApiKeyAuth:
    description: Bearer token to access the api from
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
