#:schema http://localhost:8081/v1/general/config-schema?source=action
name = "action_1"
timeout = "30m0s"

[[triggers]]
type = "cron"
cron_schedule = "0 0 * * *"

[[triggers]]
type = "manual"

# echo env
[[steps]]
name = "print-env"
command = "env"

[steps.public_repo]
repo = "nuonco/actions"
branch = "main"
directory = "step_1"

[steps.env_vars]
TEST_NUON_VAR = "{{.nuon.install.id}}"

# echo something out
[[steps]]
name = "echo"
command = "env"

[steps.public_repo]
repo = "nuonco/actions"
branch = "main"
directory = "step_2"

[steps.env_vars]
NAMESPACE = "{{.nuon.install.id}}"

# print namespace logs
[[steps]]
name = "namespace logs"
command = "./kube/namespace-logs"
[steps.public_repo]
repo = "nuonco/actions"
branch = "main"
directory = "step_3"

[steps.env_vars]
NAMESPACE = "{{.nuon.install.id}}"
