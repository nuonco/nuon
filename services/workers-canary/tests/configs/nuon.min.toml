version = "v1"

[installer]
name = "installer"
description = "one click installer"
documentation_url = "docs-url"
community_url = "community-url"
homepage_url = "homepage-url"
github_url = "github-url"
logo_url = "logo-url"
favicon_url = "favicon-url"

[runner]
runner_type = "aws-ecs"


[sandbox]
terraform_version = "1.5.4"

[sandbox.public_repo]
directory = "aws-ecs-byo-vpc"
repo = "nuonco/sandboxes"
branch = "main"

[[components]]
name = "toml_terraform"
type = "terraform_module"
terraform_version = "1.5.3"

[components.connected_repo]
directory = "infra"
repo = "powertoolsdev/mono"
branch = "main"

[[components]]
name = "toml_infra"
type = "terraform_module"
terraform_version = "1.5.4"

[components.connected_repo]
directory = "deployment"
repo = "powertoolsdev/mono"
branch = "main"

[[components]]
name = "toml_helm"
type = "helm_chart"
chart_name = "e2e-helm"

[components.connected_repo]
directory = "deployment"
repo = "powertoolsdev/mono"
branch = "main"

[[components]]
name = "toml_docker_build"
type = "docker_build"

dockerfile = "Dockerfile"

[components.connected_repo]
directory = "deployment"
repo = "powertoolsdev/mono"
branch = "main"

[[components]]
name = "toml_job"
type = "job"

image_url = "{{.nuon.components.e2e_docker_build.image.repository.uri}}"
tag	  = "{{.nuon.components.e2e_docker_build.image.tag}}"
cmd	  = ["printenv"]
args	  = [""]

[[components]]
name = "toml_container_image"
type = "container_image"

[components.public]
image_url = "kennethreitz/httpbin"
tag = "latest"

[[components]]
name = "toml_container_image_ecr"
type = "container_image"

[components.aws_ecr]
iam_role_arn = "iam_role_arn"
image_url = "ecr-url"
tag = "latest"
region = "us-west-2"
