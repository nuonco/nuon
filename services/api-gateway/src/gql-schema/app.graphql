##############################################################################
# App GQL types
##############################################################################

"""
Represents a collection of general settings and information about a User's software
"""
type App implements Node {
  id: ID!
  name: String!
  updatedAt: DateTime!
  createdAt: DateTime!
  components(options: ConnectionOptions): ComponentConnection!
  deployments(options: ConnectionOptions): DeploymentConnection!
  installs(options: ConnectionOptions): InstallConnection!
  org: Org!
}

"""
An auto-generated type which holds one App and a cursor during pagination
"""
type AppEdge {
  """
  A cursor for use in pagination
  """
  cursor: String!
  """
  The item at the end of AppEdge
  """
  node: App!
}

"""
An auto-generated type for paginating through multiple Apps
"""
type AppConnection implements Connection {
  totalCount: Int!
  pageInfo: PageInfo!
  """
  A list of edges
  """
  edges: [AppEdge!]
}

##############################################################################
# App inputs
##############################################################################

input AppInput {
  id: ID
  name: String
  githubInstallId: ID
  orgId: ID
}

##############################################################################
# App Query types
##############################################################################

extend type Query {
  app(id: ID!): App
  apps(orgId: ID!, options: ConnectionOptions): AppConnection!
}

##############################################################################
# App Mutation types
##############################################################################

extend type Mutation {
  deleteApp(id: ID!): Boolean!
  upsertApp(input: AppInput!): App
}
