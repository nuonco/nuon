##############################################################################
# Build GQL types
##############################################################################

"""
Represents information about a build
"""
type Build {
  id: ID!
  gitRef: String!
  component: Component!
  componentId: ID!
  updatedAt: DateTime!
  createdAt: DateTime!
}

"""
Represents a build log output
"""
type BuildLog {
  buildId: ID!
  logs: [JSON]!
}

##############################################################################
# Build inputs
##############################################################################

input BuildInput {
  gitRef: String
  componentId: ID!
}

##############################################################################
# Build Query types
##############################################################################
extend type Query {
  build(id: ID!): Build
  builds(componentId: ID!): [Build!]
  buildStatus(appId: ID!, buildId: ID!, componentId: ID!, orgId: ID!): Status!
}

##############################################################################
# Build Mutation types
##############################################################################

extend type Mutation {
  startBuild(input: BuildInput!): Build!
  cancelBuild(id: ID!): Boolean!
}
