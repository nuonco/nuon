##############################################################################
# Deployment types
##############################################################################
"""
Represents a collection of general info about deployed piece of software on an Install
"""
type InstanceStatus {
  hostname: String
  status: Status!
}

"""
Represents a collection of general settings and information about a deployed piece of an App
"""
type Deployment implements Node {
  createdAt: DateTime!
  commitAuthor: String
  commitHash: String
  id: ID!
  updatedAt: DateTime!
}

"""
An auto-generated type which holds one Deployment and a cursor during pagination
"""
type DeploymentEdge {
  """
  A cursor for use in pagination
  """
  cursor: String!
  """
  The item at the end of DeploymentEdge
  """
  node: Deployment
}

"""
An auto-generated type for paginating through multiple Deployments
"""
type DeploymentConnection implements Connection {
  totalCount: Int!
  pageInfo: PageInfo!
  """
  A list of edges
  """
  edges: [DeploymentEdge!]
}

##############################################################################
# Deployment Query types
##############################################################################

extend type Query {
  deployment(id: ID!): Deployment
  deployments(
    appIds: [ID]
    componentIds: [ID]
    installIds: [ID]
    options: ConnectionOptions
  ): DeploymentConnection!
  instanceStatus(
    appId: ID!
    componentId: ID!
    deployId: ID!
    installId: ID!
    orgId: ID!
  ): InstanceStatus!
  deploymentStatus(
    appId: ID!
    componentId: ID!
    deploymentId: ID!
    orgId: ID!
  ): Status!
}

##############################################################################
# Deployment Mutation types
##############################################################################

extend type Mutation {
  createDeployment(componentId: ID!): Deployment
}
