##############################################################################
# Install GQL types
##############################################################################

enum AWSRegion {
  US_EAST_1
  US_EAST_2
  US_WEST_1
  US_WEST_2
}

type NoopSettings {
  noop: Boolean
}

"""
Represents a settings for AWS cloud target
"""
type AWSSettings {
  region: AWSRegion!
  role: String!
}

"""
Represents a settings for GCP cloud target
"""
type GCPSettings {
  noop: Boolean!
}

"""
Represents cloud target settings for AWS or GCP
"""
union InstallSettings = AWSSettings | GCPSettings

"""
Represents a collection of general settings and information about a cloud target
"""
type Install implements Node {
  createdAt: DateTime!
  id: ID!
  name: String!
  settings: InstallSettings!
  updatedAt: DateTime!
  app: App!
  deployments(options: ConnectionOptions): DeploymentConnection!
  components(options: ConnectionOptions): ComponentConnection!
}

"""
An auto-generated type which holds one Install and a cursor during pagination
"""
type InstallEdge {
  """
  A cursor for use in pagination
  """
  cursor: String!
  """
  The item at the end of InstallEdge
  """
  node: Install!
}

"""
An auto-generated type for paginating through multiple Installs
"""
type InstallConnection implements Connection {
  totalCount: Int!
  pageInfo: PageInfo!
  """
  A list of edges
  """
  edges: [InstallEdge!]
}

##############################################################################
# Install inputs
##############################################################################

input AWSSettingsInput {
  region: AWSRegion!
  role: String!
}

input GCPSettingsInput {
  bogus: String!
}

input InstallInput {
  id: ID
  name: String
  appId: ID
  awsSettings: AWSSettingsInput
  gcpSettings: GCPSettingsInput
}

##############################################################################
# Install Query types
##############################################################################

extend type Query {
  install(id: ID!): Install
  installStatus(appId: ID!, installId: ID!, orgId: ID!): Status!
  installs(appId: ID!, options: ConnectionOptions): InstallConnection!
}

##############################################################################
# Install Mutation types
##############################################################################

extend type Mutation {
  deleteInstall(id: ID!): Boolean!
  upsertInstall(input: InstallInput!): Install
}
