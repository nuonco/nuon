---
key_stroke_delay: 40ms
command_delay: 200ms
terminal: ~/nuon $
env_vars:
  ENV_VAR: env_var
steps:
  - name: Intro
    notes: |
      I'm going to walk you through installing an app in a customer's already existing VPC.
    cmd:
      - open
      - slides/1.pdf

  - name: Configuring the App
    cmd:
      - open
      - slides/2.pdf
 
  - name: Demo the AWS Resources
    cmd:
      - open
 
  - name: Demo the API
    cmd:
      - open
      - https://introspect.inlmmk9vt0bv07zcxyduy5k2ti.stage.nuon.run/introspect/env

  - name: Install the CLI
    cmd:
      - brew
      - install
      - nuonco/tap/nuon

  - name: Log into Nuon
    cmd:
      - nuon
      - login

  - name: Select an org
    notes: |
      Since I work here, I'm already a member of the development org we're using for this demo.
      If you don't have an org already, simply run nuon orgs create --name {your-org-name}.
    cmd:
      - nuon
      - orgs
      - select
      - --org=orgzblonf9hol7jq92vkdriio4

  - name: Create the app
    cmd:
      - nuon
      - apps
      - create
      - --name=my_byovpc_app

  - name: Configure the app
    notes: |
      Remember to update the installer slug!
    cmd:
      - nvim
      - nuon.my_byovpc_app.toml

  - name: Sync the app config
    cmd:
      - nuon
      - apps
      - sync

  - name: Select the app
    cmd:
      - nuon
      - apps
      - select
      - --app=my_byovpc_app

  - name: Connect the components
    cmd:
      - nvim
      - nuon.my_byovpc_app.toml

  - name: Sync the component configs
    cmd:
      - nuon
      - apps
      - sync

  - name: View the components
    cmd:
      - nuon
      - components
      - list

  - name: View the component builds
    cmd:
      - nuon
      - builds
      - list

  - name: Installing the App
    cmd:
      - open
      - slides/3.pdf

  - name: Create an install
    notes: |
      We're now going to switch roles, from the BYOC developer, to the BYOC customer.
      As a customer, I'm going to visit the developer's installer to install their app in my cloud account.
      To show how easy this is, let's use Cloudformation to create the IAM role.
      Now that I have the ARN, I simply paste into the installer and go.
      At this point, Nuon takes over. It will provision the install and deploy the app for me.
    cmd:
      - open
      - https://app.stage.nuon.co/installer/my-byovpc-app

  - name: Monitoring the Install
    cmd:
      - open
      - slides/4.pdf

  - name: Monitor installs in the dashboard
    notes: |
      Back on the developer side of things, if I open the Nuon dashboard, I'll see the new install being created for Acme Inc.
    cmd:
      - open
      - https://app.stage.nuon.co

  - name: Next steps
    notes: |
      Now you know how to create a BYOC app, and how easy it is for customers to install it in their VPC.
    cmd:
      - open
      - https://docs.nuon.co
