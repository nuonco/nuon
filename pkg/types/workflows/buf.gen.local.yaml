---
version: v1
managed:
  enabled: true
plugins:
  # use the js plugin
  - plugin: buf.build/protocolbuffers/js:v3.21.2
    opt: import_style=commonjs,binary
    out: ../../../services/api-gateway/src/build/workflows

  - name: grpc
    path: ../../../node_modules/.bin/grpc_tools_node_protoc_plugin
    opt: grpc_js
    out: ../../../services/api-gateway/src/build/workflows
    strategy: all

  # the following are experimental
  # https://dev.to/devaddict/use-grpc-with-node-js-and-typescript-3c58
  - plugin: es
    opt: target=ts
    out: ../../../services/api-gateway/src/build/workflows-es
    path: ../../../node_modules/.bin/protoc-gen-es
