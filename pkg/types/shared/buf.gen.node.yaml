---
version: v1
managed:
  enabled: true
plugins:
  - plugin: buf.build/protocolbuffers/js:v3.21.2
    opt: import_style=commonjs,binary
    out: ../build/shared

  - name: grpc
    path: ../../../node_modules/.bin/grpc_tools_node_protoc_plugin
    opt: grpc_js
    out: ../build/shared
    strategy: all

  # experimental
  - plugin: es
    opt: target=ts
    out: ../build/shared-es
    path: ../../../node_modules/.bin/protoc-gen-es
