package domain

import (
	"math/rand"
	"path"
	"time"

	petname "github.com/dustinkirkland/golang-petname"
)

const (
	wordsPerRandomHostname int    = 3
	hostNameWordSeparator  string = "-"
)

func init() { //nolint:gochecknoinits
	rand.Seed(time.Now().UTC().UnixNano())
}

// NewAutogeneratedDomain: return a new auto generated domain using the configured top level domain
func NewAutogeneratedDomain(cfg Config) string {
	randomName := petname.Generate(wordsPerRandomHostname, hostNameWordSeparator)
	return path.Join(randomName, cfg.InstallDefaultRootDomain)
}
